/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./js/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* eslint-disable curly */
// ---------------------------------
// Utils
// ---------------------------------
// Modules
// ---------------------------------
// все скрипты должны быть в обработчике 'DOMContentLoaded', но не все в 'load'
// в load следует добавить скрипты, не участвующие в работе первого экрана
window.addEventListener('DOMContentLoaded', function () {
  // Modules
  // ---------------------------------
  var accordionFooter = document.querySelectorAll('.accordion-footer');
  var accordionFooterToggle = document.querySelectorAll('.accordion-footer__toggle');
  var accordionFooterContents = document.querySelectorAll('.accordion-footer__content');
  var toggles = Array.from(accordionFooterToggle);
  toggles.forEach(function (el) {
    el.classList.remove('accordion-footer__toggle--nojs');
  });
  var contents = Array.from(accordionFooterContents);
  contents.forEach(function (el) {
    el.classList.remove('accordion-footer__content--nojs');
  });

  var hiddenContent = function hiddenContent(btn, content) {
    btn.classList.remove('accordion-footer__toggle--active');
    content.classList.remove('accordion-footer__content--show');
  };

  var showContent = function showContent(btn, content) {
    btn.classList.add('accordion-footer__toggle--active');
    content.classList.add('accordion-footer__content--show');
  };

  var toggleAccordion = function toggleAccordion(evt) {
    Array.prototype.forEach.call(accordionFooterContents, function (accordionContent) {
      var btn = accordionContent.closest('.accordion-footer').querySelector('.accordion-footer__toggle');

      if (btn === evt.target && !btn.classList.contains('accordion-footer__toggle') || btn !== evt.target) {
        hiddenContent(btn, accordionContent);
      } else if (btn === evt.target) {
        showContent(btn, accordionContent);
      }
    });
  };

  Array.prototype.forEach.call(accordionFooter, function (accordion) {
    var togglebtn = accordion.querySelector('.accordion-footer__toggle');
    var accordionContent = accordion.querySelector('.accordion-footer__content');
    hiddenContent(togglebtn, accordionContent);
    togglebtn.addEventListener('click', toggleAccordion);
  }); // Показать/скрыть текст блока 'О компании'

  var txtHideDesktop = document.querySelector('.introduction__txt-desk');
  var txtHideMobile = document.querySelector('.introduction__txt-mob');
  var introductionbtn = document.querySelector('.introduction__btn');
  txtHideDesktop.classList.remove('introduction__txt-desk--nojs');
  txtHideMobile.classList.remove('introduction__txt-mob--nojs');

  var readMore = function readMore() {
    if (txtHideDesktop.classList.contains('introduction__txt-desk--hidden')) {
      txtHideDesktop.classList.remove('introduction__txt-desk--hidden');
      introductionbtn.innerHTML = 'Скрыть';
    } else {
      txtHideDesktop.classList.add('introduction__txt-desk--hidden');
      introductionbtn.innerHTML = 'Подробнее';
    }

    if (txtHideMobile.classList.contains('introduction__txt-mob--hidden')) {
      txtHideMobile.classList.remove('introduction__txt-mob--hidden');
      introductionbtn.innerHTML = 'Скрыть';
    } else {
      txtHideMobile.classList.add('introduction__txt-mob--hidden');
      introductionbtn.innerHTML = 'Подробнее';
    }
  };

  introductionbtn.addEventListener('click', readMore); // Modal

  var m = document.querySelector('.modal');
  var p = document.querySelector('.page-body');

  function swap() {
    p.parentNode.insertBefore(m, p);
  }

  swap();
  var btnСallback = document.querySelector('[data-open-modal]');
  var modal = document.querySelector('.modal');
  var modalAdvance = document.querySelector('.modal-success');
  var modalOff = document.querySelectorAll('.modal__off');
  var closePopupModal = document.querySelectorAll('.modal__popup');
  var modalForm = modal.querySelector('form');
  var modalLogin = modal.querySelector('[name=name]');
  var modalTel = modal.querySelector('[name=tel]');
  var isStorageSupport = true;
  var storage = '';

  try {
    storage = localStorage.getItem('name');
  } catch (err) {
    isStorageSupport = false;
  } // scroll-lock


  var offScroll = function offScroll() {
    document.body.classList.add('scroll-lock');
  };

  var onScroll = function onScroll() {
    document.body.classList.remove('scroll-lock');
  };

  btnСallback.addEventListener('click', function (evt) {
    evt.preventDefault();
    modal.classList.add('modal--show');
    offScroll();

    if (storage) {
      modalLogin.value = storage;
      modalTel.focus();
    } else {
      modalLogin.focus();
    }
  });
  modalOff.forEach(function (el) {
    el.addEventListener('click', function (evt) {
      evt.preventDefault();
      modal.classList.remove('modal--show');
      modalAdvance.classList.remove('modal-success--show');
      onScroll();
    });
  });
  modalForm.addEventListener('submit', function (evt) {
    if (modalLogin.value || modalTel.value) {
      evt.preventDefault();
      modal.classList.remove('modal--show');
      modalAdvance.classList.add('modal-success--show');
    } else {
      if (isStorageSupport) {
        localStorage.setItem('name', modalLogin.value);
      }
    }
  });
  window.addEventListener('keydown', function (evt) {
    if (evt.keyCode === 27) {
      evt.preventDefault();

      if (modal.classList.contains('modal--show')) {
        modal.classList.remove('modal--show');
        onScroll();
      }

      if (modalAdvance.classList.contains('modal-success--show')) {
        modalAdvance.classList.remove('modal-success--show');
        onScroll();
      }
    }
  });
  closePopupModal.forEach(function (el) {
    el.addEventListener('click', function () {
      if (modal.classList.contains('modal--show')) {
        modal.classList.remove('modal--show');
        onScroll();
      }

      if (modalAdvance.classList.contains('modal-success--show')) {
        modalAdvance.classList.remove('modal-success--show');
        onScroll();
      }
    });
  }); // trapFocus

  function trapFocus(element) {
    var focusableEls = element.querySelectorAll('input[type="text"], input[type="tel"], textarea,  input[type="checkbox"], btn');
    var firstFocusableEl = focusableEls[0];
    var lastFocusableEl = focusableEls[focusableEls.length - 1];
    var KEYCODE_TAB = 9;
    element.addEventListener('keydown', function (e) {
      var isTabPressed = e.key === 'Tab' || e.keyCode === KEYCODE_TAB;

      if (!isTabPressed) {
        return;
      }

      if (e.shiftKey)
        /* shift + tab */
        {
          if (document.activeElement === firstFocusableEl) {
            lastFocusableEl.focus();
            e.preventDefault();
          }
        } else
        /* tab */
        {
          if (document.activeElement === lastFocusableEl) {
            firstFocusableEl.focus();
            e.preventDefault();
          }
        }
    });
  }

  trapFocus(modal); // Маска для номера телефона

  [].forEach.call(document.querySelectorAll('input[type="tel"]'), function (input) {
    var keyCode;

    function mask(event) {
      // eslint-disable-next-line no-unused-expressions
      event.keyCode && (keyCode = event.keyCode); // eslint-disable-next-line no-invalid-this

      var pos = this.selectionStart; // eslint-disable-next-line curly

      if (pos < 3) event.preventDefault(); // eslint-disable-next-line one-var

      var matrix = '+7 (___) ___ ____',
          i = 0,
          def = matrix.replace(/\D/g, ''),
          // eslint-disable-next-line no-invalid-this
      val = this.value.replace(/\D/g, ''),
          // eslint-disable-next-line camelcase
      new_value = matrix.replace(/[_\d]/g, function (a) {
        return i < val.length ? val.charAt(i++) || def.charAt(i) : a;
      }); // eslint-disable-next-line camelcase

      i = new_value.indexOf('_'); // eslint-disable-next-line eqeqeq

      if (i != -1) {
        // eslint-disable-next-line no-unused-expressions
        i < 5 && (i = 3); // eslint-disable-next-line camelcase

        new_value = new_value.slice(0, i);
      }

      var reg = matrix // eslint-disable-next-line no-invalid-this
      .substr(0, this.value.length).replace(/_+/g, function (a) {
        return '\\d{1,' + a.length + '}';
      }).replace(/[+()]/g, '\\$&');
      reg = new RegExp('^' + reg + '$');
      if ( // eslint-disable-next-line no-invalid-this
      !reg.test(this.value) || // eslint-disable-next-line no-invalid-this
      this.value.length < 5 || keyCode > 47 && keyCode < 58) // eslint-disable-next-line no-invalid-this, camelcase
        this.value = new_value; // eslint-disable-next-line eqeqeq, no-invalid-this

      if (event.type == 'blur' && this.value.length < 5) this.value = '';
    }

    input.addEventListener('input', mask, false);
    input.addEventListener('focus', mask, false);
    input.addEventListener('blur', mask, false);
    input.addEventListener('keydown', mask, false);
  });
}); // ---------------------------------
// ❗❗❗ обязательно установите плагины eslint, stylelint, editorconfig в редактор кода.
// привязывайте js не на классы, а на дата атрибуты (data-validate)
// вместо модификаторов .block--active используем утилитарные классы
// .is-active || .is-open || .is-invalid и прочие (обязателен нейминг в два слова)
// .select.select--opened ❌ ---> [data-select].is-open ✅
// выносим все в дата атрибуты
// url до иконок пинов карты, настройки автопрокрутки слайдера, url к json и т.д.
// для адаптивного JS используется matchMedia и addListener
// const breakpoint = window.matchMedia(`(min-width:1024px)`);
// const breakpointChecker = () => {
//   if (breakpoint.matches) {
//   } else {
//   }
// };
// breakpoint.addListener(breakpointChecker);
// breakpointChecker();
// используйте .closest(el)

/***/ })

/******/ });
//# sourceMappingURL=main.min.js.map